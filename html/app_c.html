<?xml version="1.0"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>How to Think Like a Computer Scientist: C. Doctests and test driven development</title><link href="stylesheet.css" type="text/css" rel="stylesheet" /></head><body bgcolor="white"><h1 class="title">C. Doctests and test driven development</h1><div class="toc"><ol><li><a href="#auto0">Automated testing with doctest</a></li><li><a href="#auto1">docstrings</a></li><li><a href="#auto2">The doctest module</a></li></ol></div><div class="content"><span></span><h2>C.1 Automated testing with <code>doctest</code><a name="auto0"></a></h2><p><code>doctest</code> is a module in the Python standard library which 
makes innovative use of Python's docstring, interactive shell, and
introspection capabilities.
</p><h2>C.2 docstrings<a name="auto1"></a></h2><p>Python's <strong>docstring</strong>s provide an easy way to document
modules, classes, methods, and functions.  A docstring is simply a string
constant that occurs as the first statement of an object's definition.
Here is an example from the chapter on trees illustrating its use:
</p><pre class="python">
<span class="py-src-keyword">def</span> <span class="py-src-identifier">total</span>(<span class="py-src-parameter">tree</span>):
    <span class="py-src-string">&quot;&quot;&quot;total(tree) -&gt; sum

      Return the sum of the values of the elements of a tree of numbers.
    &quot;&quot;&quot;</span>
    <span class="py-src-keyword">if</span> <span class="py-src-variable">tree</span> == <span class="py-src-variable">None</span>: <span class="py-src-keyword">return</span> <span class="py-src-number">0</span>
    <span class="py-src-keyword">return</span> <span class="py-src-variable">total</span>(<span class="py-src-variable">tree</span>.<span class="py-src-variable">left</span>) + <span class="py-src-variable">total</span>(<span class="py-src-variable">tree</span>.<span class="py-src-variable">right</span>)
</pre><p>Assuming the example above is in a module named <code>trees.py</code>,
the following is now possible:</p><pre class="python-shell">
&gt;&gt;&gt; from trees import *
&gt;&gt;&gt; print total.__doc__
total(tree) -&gt; sum

      Return the sum of the values of the elements of a tree of numbers.

</pre><h2>C.3 The <code>doctest</code> module<a name="auto2"></a></h2><p>
The <code>doctest</code> module was added to the 2.3 release of Python.
Created by core python developer Tim Peters, <code>doctest</code> enables
programmers to use docstrings for automated testing.
</p><pre class="python">
<span class="py-src-string">&quot;&quot;&quot;
  &gt;&gt;&gt; distance(1, 2, 4, 6)
  5.0
&quot;&quot;&quot;</span>

<span class="py-src-keyword">def</span> <span class="py-src-identifier">distance</span>(<span class="py-src-parameter">x1</span>, <span class="py-src-parameter">y1</span>, <span class="py-src-parameter">x2</span>, <span class="py-src-parameter">y2</span>):
    <span class="py-src-keyword">return</span> <span class="py-src-number">0.0</span> 

<span class="py-src-keyword">if</span> <span class="py-src-variable">__name__</span> == <span class="py-src-string">&quot;__main__&quot;</span>:
    <span class="py-src-keyword">import</span> <span class="py-src-variable">doctest</span>
    <span class="py-src-variable">doctest</span>.<span class="py-src-variable">testmod</span>()
</pre><p>
The example above is taken from the <em>Program development</em> section of
chapter 5.  Running this program produces the following output:
</p><pre class="shell">
**********************************************************************
File &quot;doctest_example01.py&quot;, line 2, in __main__
Failed example:
    distance(1, 2, 4, 6)
Expected:
    5.0
Got:
    0.0
**********************************************************************
1 items had failures:
   1 of   1 in __main__
***Test Failed*** 1 failures.
</pre><p>
Doctests are written as sample Python interpreter sessions inside a docstring.
The doctest in this example is in the module's docstring, but it could also
be placed in the docstring of the function being tested.
</p><p>
Each test consists of a Python expression written after the interpreter prompt
(<code>&gt;&gt;&gt;</code>) followed on the next line by the expected
evaluation of the given expression.  The doctest module runs each expression
through the interpreter and compares the evaluation with the expected one.
</p></div><p><a href="index.html">Table of Contents</a> |
    <a href="dex.html">Index</a></p></body></html>